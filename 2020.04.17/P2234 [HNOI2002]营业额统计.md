# [P2234 [HNOI2002]营业额统计](https://www.luogu.com.cn/problem/P2234)

题目描述

Tiger最近被公司升任为营业部经理，他上任后接受公司交给的第一项任务便是统计并分析公司成立以来的营业情况。

Tiger拿出了公司的账本，账本上记录了公司成立以来每天的营业额。分析营业情况是一项相当复杂的工作。由于节假日，大减价或者是其他情况的时候，营业额会出现一定的波动，当然一定的波动是能够接受的，但是在某些时候营业额突变得很高或是很低，这就证明公司此时的经营状况出现了问题。经济管理学上定义了一种最小波动值来衡量这种情况：

当最小波动值越大时，就说明营业情况越不稳定。

而分析整个公司的从成立到现在营业情况是否稳定，只需要把每一天的最小波动值加起来就可以了。你的任务就是编写一个程序帮助Tiger来计算这一个值。

第一天的最小波动值为第一天的营业额。

该天的最小波动值=min{|该天以前某一天的营业额-该天营业额|}。

## 输入格式

输入由文件’turnover.in’读入。

第一行为正整数n（n<=32767） ，表示该公司从成立一直到现在的天数，接下来的n行每行有一个整数ai(|ai|<=1000000) ，表示第i天公司的营业额，可能存在负数。

## 输出格式

![img](https://cdn.luogu.com.cn/upload/pic/1298.png)

## 输入输出样例

**输入 #1**复制

```
6
5
1
2
5
4
6
```

**输出 #1**复制

```
12
```

## 说明/提示

结果说明：5+|1-5|+|2-1|+|5-5|+|4-5|+|6-5|=5+4+1+0+1+1=12



***

看一遍之后认为是用STL中set，作为STL入门题。

但是题目算法标签是splay，treap。。。学完树之后再来看看吧。



***

STL :

```c++
#include <bits/stdc++.h>
using namespace std;

int main(){
    set<int> s;
    s.insert(0x7ffffff);
    s.insert(0x7ffffff*-1);
    set<int>::iterator l,r;
    int n,rst=0,t;
    scanf("%d",&n);
    while(n--){
    	scanf("%d",&t);
    	if(s.size()==2){
    		s.insert(t);
    		rst+=t;
		}else{
			l=s.lower_bound(t);
			l--;
			r=s.lower_bound(t);
			rst+=min(abs(t-(*l)),abs(t-(*r)));
			s.insert(t);
		}
	}
    printf("%d",rst);
    return 0;
}
```

