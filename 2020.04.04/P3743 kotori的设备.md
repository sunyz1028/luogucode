## [P3743 kotori的设备](https://www.luogu.com.cn/problem/P3743)

## 题目背景

kotori 有 n 个可同时使用的设备。

## 题目描述

第 i 个设备每秒消耗ai个单位能量。能量的使用是连续的，也就是说能量不是某时刻突然消耗的，而是匀速消耗。也就是说，对于任意实数 ,在 k 秒内消耗的能量均为k*ai 单位。在开始的时候第 i 个设备里存储着bi个单位能量。

同时 kotori 又有一个可以给任意一个设备充电的充电宝，每秒可以给接通的设备充能p 个单位，充能也是连续的，不再赘述。你可以在任意时间给任意一个设备充能，从一个设备切换到另一个设备的时间忽略不计。

kotori 想把这些设备一起使用，直到其中有设备能量降为 0。所以 kotori 想知道，

在充电器的作用下，她最多能将这些设备一起使用多久。

## 输入格式

第一行给出两个整数 n,p。

接下来 n 行，每行表示一个设备，给出两个整数，分别是这个设备的ai 和 bi。

## 输出格式

如果 kotori 可以无限使用这些设备，输出-1。

否则输出 kotori 在其中一个设备能量降为 0 之前最多能使用多久。

设你的答案为 a,标准答案为 b,只有当 a,b 满足 ![img](https://cdn.luogu.com.cn/upload/pic/5170.png) 的时候，你能得到本测

试点的满分。

## 输入输出样例

**输入 #1**复制

```
2 1
2 2
2 1000
```

**输出 #1**复制

```
2.0000000000
```

**输入 #2**复制

```
1 100
1 1
```

**输出 #2**复制

```
-1 
```

**输入 #3**复制

```
3 5
4 3
5 2
6 1
```

**输出 #3**复制

```
0.5000000000 
```

## 说明/提示

对于 100%的数据， 1<=n<=100000，1<=p<=100000，1<=ai,bi<=100000。



***

二分答案法，因为充电是连续的且切换时间不计，所以只要换的够快就相当于可以同时给几个设备充电。

同时要注意数据 l最大可以取到1e10 （n * bi = 1e5 * 1e5 = 1e10）

还要注意精度只需要1e-4如果过大会卡时



#### 总结一下二分题目：

二分查找题目是针对有序数列进行查找，首先要排队。

二分答案题最重要的是找到 l 和 r 并且有精度时也要注意精度。大同小异，记住大概的模板就可以了。

***



```c++
#include<bits/stdc++.h>
#define ll long long
using namespace std;
double a[110000]={0},b[110000]={0};
int main() {
	int n,p;
	long double suma=0;
	scanf("%d %d",&n,&p);
	for(int i=0;i<n;i++){
		scanf("%lf %lf",&a[i],&b[i]);
		suma+=a[i];
	}
	if(p>=suma){
		printf("-1");
		return 0;
	}
	double l=0.0,r=10000000000,m,sum;
	while((r-l)>=0.000001){
		m=(l+r)/2,sum=0;
		for(int i=0;i<n;i++){
			if(b[i]>=m*a[i])	continue;
			sum=sum+b[i]-m*a[i];
		}
		sum+=p*m;
		//printf("%lf %lf %lf %lf\n",l,m,r,sum);
		if(sum>0)	l=m;
		else if(sum<0)	r=m;
		else break;
	}
	printf("%.10lf",m);
	return 0;
}
```

